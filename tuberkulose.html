
<!-- Load c3.css -->
<link href='https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.css' rel='stylesheet' type='text/css'/>

<!-- Load d3.js and c3.js -->
<script src='https://d3js.org/d3.v5.min.js' charset='utf-8'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.js'></script>

<style type="text/css">
    .c3-grid text {
        fill:#263640;
        color: black;
    }

    .flexbox {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .headline {
        font-family: 'PT Sans Narrow',sans-serif;
        text-transform: uppercase;
        font-weight: 700;
        font-size: 20px;
        line-height: 18px;
    }

    .text {
        font-family: 'PT Serif',serif;
        font-size: 15px;
        line-height: 1.3em;
        color: #657683;
    }
</style>

<div id="trends-wrapper" class="flexbox" style="width: 100%;">
    <div id="trends" style="width: 80%; height: 100%; max-height: 320px; display: inline-block;" class="c3"><svg style="overflow: hidden;" width="1110" height="320">
    </div>
<div id ="comment" style="margin-left: 1%; width: 18%; display: inline-block;">
    <div class="text">
        Grafen viser det relative antallet av aviser per dag som bruker en variant av tuberkulose. 1 betyr at alle avisene, 0 at ingen av avisene bruker ordet. Ved å klikke på et punkt i grafen, kan du få opp treff i de aktuelle avisutgavene.
    </div>
</div>
</div>

<script>
    var trends = document.getElementById('trends');

    // FROM: https://stackoverflow.com/a/5914086
    function padStr(i) {
        return (i < 10) ? "0" + i : "" + i;
    }

    var data =  {'data': {
                'onclick': function (d, element) {
                    dateStr = d["x"];
                    year = dateStr.getFullYear();
                    date = year + '0101'; dateTo = year + '1231'; term = d["name"];
                    term = term.replace('/', ' OR ')
                    url = "https://www.nb.no/search?q=" + encodeURIComponent(term) + "&mediatype=aviser&fromDate=" + date + "&toDate=" + dateTo
                    window.open(url);
                },
               'x': 'x',
               'columns': [['x', '1870-01-01', '1871-01-01', '1872-01-01', '1873-01-01', '1874-01-01', '1875-01-01', '1876-01-01', '1877-01-01', '1878-01-01', '1879-01-01', '1880-01-01', '1881-01-01', '1882-01-01', '1883-01-01', '1884-01-01', '1885-01-01', '1886-01-01', '1887-01-01', '1888-01-01', '1889-01-01', '1890-01-01', '1891-01-01', '1892-01-01', '1893-01-01', '1894-01-01', '1895-01-01', '1896-01-01', '1897-01-01', '1898-01-01', '1899-01-01', '1900-01-01', '1901-01-01', '1902-01-01', '1903-01-01', '1904-01-01', '1905-01-01', '1906-01-01', '1907-01-01', '1908-01-01', '1909-01-01', '1910-01-01', '1911-01-01', '1912-01-01', '1913-01-01', '1914-01-01', '1915-01-01', '1916-01-01', '1917-01-01', '1918-01-01', '1919-01-01', '1920-01-01', '1921-01-01', '1922-01-01', '1923-01-01', '1924-01-01', '1925-01-01', '1926-01-01', '1927-01-01', '1928-01-01', '1929-01-01', '1930-01-01', '1931-01-01', '1932-01-01', '1933-01-01', '1934-01-01', '1935-01-01', '1936-01-01', '1937-01-01', '1938-01-01', '1939-01-01', '1940-01-01', '1941-01-01', '1942-01-01', '1943-01-01', '1944-01-01', '1945-01-01', '1946-01-01', '1947-01-01', '1948-01-01', '1949-01-01', '1950-01-01', '1951-01-01', '1952-01-01', '1953-01-01', '1954-01-01', '1955-01-01', '1956-01-01', '1957-01-01', '1958-01-01', '1959-01-01', '1960-01-01', '1961-01-01', '1962-01-01', '1963-01-01', '1964-01-01', '1965-01-01', '1966-01-01', '1967-01-01', '1968-01-01', '1969-01-01', '1970-01-01'], ['tuberk*', 0.01026542178695962, 0.011900035499288236, 0.013793764807326485, 0.014837999362393372, 0.017512048104018255, 0.019880255489926113, 0.022659853428533307, 0.024081163088710833, 0.02455525714997551, 0.025779777267011462, 0.027496827609710096, 0.02584297554685077, 0.02524906950439184, 0.023907098987664042, 0.02320059802976589, 0.025069341069521016, 0.02603111479626372, 0.02988168493074897, 0.034989434234474384, 0.037128711432724504, 0.03923745833951303, 0.04254938885230325, 0.043312845522879825, 0.04774740490004124, 0.04792311568258517, 0.04946957767989207, 0.056992737351592423, 0.06710062210266551, 0.08324404112122352, 0.09698419678034623, 0.1076725485339144, 0.11470560128589302, 0.11892849864462814, 0.11828547051556282, 0.1195185050997805, 0.1161851160236769, 0.1174871581461902, 0.11833530883902554, 0.1373172711097814, 0.17143662899212828, 0.2063869183510791, 0.22855339907885858, 0.2436179210116132, 0.25861914997923774, 0.26907184695444947, 0.2623921148112296, 0.2411464846786145, 0.223047661633589, 0.2120753352880624, 0.20902091887822608, 0.2057853339448458, 0.20886278004180397, 0.21796547156653018, 0.22815767783363466, 0.22981620051571147, 0.2376992329997167, 0.24920855642071474, 0.26215996519348506, 0.2690538830687875, 0.2701217048468783, 0.2688120371985436, 0.27221500465051224, 0.27451447077803065, 0.2732757775061825, 0.26770621806623174, 0.2659467113520702, 0.26366508489593765, 0.25700949047157706, 0.25383169794841587, 0.246775037879857, 0.2374048701664058, 0.22743362724920319, 0.22531423015316968, 0.23215568032124592, 0.247835473045991, 0.2668930381433078, 0.2877094829164592, 0.3074433529081763, 0.3267090911922748, 0.3388568648089633, 0.3425585203886583, 0.3439064474021966, 0.3373726823898923, 0.3285269387720656, 0.3184917424066254, 0.3100603681623862, 0.2970993556024083, 0.2873017972245249, 0.27191066132821495, 0.2550194687289959, 0.23506534437010235, 0.2150692424321798, 0.19648199183077297, 0.17831430345738294, 0.16010708070611826, 0.14818808004248463, 0.13842479471135352, 0.11678653640379975, 0.1111605328752326, 0.10230434376239413, 0.09455205226221558]]
            },
           'axis': {
                'x': {
                    'type': 'timeseries',
                    'tick': {
                        'format': '%Y'
                    }
                }
            }
        } 
    data['bindto']='#trends'
    c3.generate(data);
</script>


<!-- Load c3.css -->
<link href='https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.css' rel='stylesheet' type='text/css'/>

<!-- Load d3.js and c3.js -->
<script src='https://d3js.org/d3.v5.min.js' charset='utf-8'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.js'></script>

<link rel="stylesheet" type="text/css" href="timeline-interactive-graphics.css">

<div id="trends-wrapper" class="flexbox" style="width: 100%;">
    <div id="trends" style="width: 80%; height: 100%; max-height: 320px; display: inline-block;" class="c3"><svg style="overflow: hidden;" width="1110" height="320">
    </div>
<div id ="comment" style="margin-left: 1%; width: 18%; display: inline-block;">
    <div class="text">
        Grafen viser det relative antallet av aviser per dag som refererer til AIDS. 1 betyr at alle avisene, 0 at ingen av avisene bruker ordet. Ved å klikke på et punkt i grafen, kan du få opp treff i de aktuelle avisutgavene.
    </div>
</div>
</div>

<script>
    var trends = document.getElementById('trends');

    // FROM: https://stackoverflow.com/a/5914086
    function padStr(i) {
        return (i < 10) ? "0" + i : "" + i;
    }

    var data =  {'data': {
                'onclick': function (d, element) {
                    dateStr = d["x"];
                    year = dateStr.getFullYear();
                    date = year + '0101'; dateTo = year + '1231'; term = d["name"];
                    term = term.replace('/', ' OR ')
                    url = "https://www.nb.no/search?q=" + encodeURIComponent(term) + "&mediatype=aviser&fromDate=" + date + "&toDate=" + dateTo
                    window.open(url);
                },
               'x': 'x',
               'columns': [['x', '1979-01-01', '1980-01-01', '1981-01-01', '1982-01-01', '1983-01-01', '1984-01-01', '1985-01-01', '1986-01-01', '1987-01-01', '1988-01-01', '1989-01-01', '1990-01-01', '1991-01-01', '1992-01-01', '1993-01-01', '1994-01-01', '1995-01-01', '1996-01-01', '1997-01-01', '1998-01-01', '1999-01-01', '2000-01-01', '2001-01-01', '2002-01-01', '2003-01-01', '2004-01-01', '2005-01-01', '2006-01-01', '2007-01-01', '2008-01-01', '2009-01-01', '2010-01-01', '2011-01-01', '2012-01-01', '2013-01-01', '2014-01-01', '2015-01-01', '2016-01-01', '2017-01-01', '2018-01-01', '2019-01-01', '2020-01-01'], ['AIDS', 0.004542668156179306, 0.010407975636227978, 0.014211980658609786, 0.03902500349749749, 0.0780430999517142, 0.14583544893033132, 0.19614899442187658, 0.22971817310465786, 0.2530232458538513, 0.2733091789356295, 0.2770407780686008, 0.2650609482885736, 0.22376649327394654, 0.19627936845463037, 0.18522383940030687, 0.17783139487315008, 0.17027303473181374, 0.15816143332595736, 0.15289852967260456, 0.15648264341624615, 0.15665463739200453, 0.15678266760801102, 0.1538617307417513, 0.15953440858342458, 0.1609989893263406, 0.15872199923355915, 0.14170941399333614, 0.1274731652098949, 0.11275165269450008, 0.10053047178451564, 0.08255866283310385, 0.06982683075512955, 0.05522273603799858, 0.04814075120711499, 0.042760562796811445, 0.03702166374569649, 0.03453153974935236, 0.03165141401780578, 0.027748412732413415, 0.025746270042433118, 0.02160011173135421, 0.02011308732259497], ['HIV/AIDS', 0.0006851872266720304, 0.0011828722203366358, 0.0013377971956529515, 0.002649727163185845, 0.011378879467762648, 0.04739221958879849, 0.07644735490584723, 0.09475802082541938, 0.10782173055331778, 0.11939239626423948, 0.1339054011328125, 0.13690108879964608, 0.1116317375144117, 0.09348364682107595, 0.08650806771113366, 0.08132316089917634, 0.07710020596835557, 0.06960209026431895, 0.06845782182374806, 0.07671102391368767, 0.0786946217269046, 0.08026857080712954, 0.08287058800879497, 0.09046275980713168, 0.0947276372349291, 0.09903756421316247, 0.08860087801159121, 0.08156759108276279, 0.0738733945798932, 0.06618748018857547, 0.05374087091584485, 0.04417724366203757, 0.03140164985730037, 0.025645266808436196, 0.021223490287802883, 0.01690171820659561, 0.014999466886743636, 0.01308952569613518, 0.01187680607464961, 0.01129000497230405, 0.009494840324346682, 0.009265885276341163]]
            },
           'axis': {
                'x': {
                    'type': 'timeseries',
                    'tick': {
                        'format': '%Y'
                    }
                }
            }
        }
    data['bindto']='#trends'
    c3.generate(data);
</script>

<!-- Load c3.css -->
<link href='https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.css' rel='stylesheet' type='text/css'/>

<!-- Load d3.js and c3.js -->
<script src='https://d3js.org/d3.v5.min.js' charset='utf-8'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.js'></script>

<div id="content"><style type="text/css">
    .c3-grid text {
        fill:#263640;
        color: black;
    }

    .flexbox {
    	display: flex;
  		justify-content: center;
  		align-items: center;
    }

    .headline {
	    font-family: 'PT Sans Narrow',sans-serif;
    	text-transform: uppercase;
    	font-weight: 700;
    	font-size: 20px;
    	line-height: 18px;
    }

    .text {
    	font-family: 'PT Serif',serif;
    	font-size: 15px;
    	line-height: 1.3em;
    	color: #657683;
    }
</style>

<div id="trends-wrapper" class="flexbox" style="width: 100%;">
	<div id="trends" style="width: 80%; height: 100%; max-height: 320px; display: inline-block;" class="c3"><svg style="overflow: hidden;" width="1110" height="320">
    </div>
<div id ="comment" style="margin-left: 1%; width: 18%; display: inline-block;">
	<div class="text">
		Grafen viser det relative antallet av aviser som bruker ordet <i>kolera</i> i perioden 1828 til 1870. Toppene koressponderer med <a href="https://lokalhistoriewiki.no/wiki/Kolera">kjente kolera-epidemier i Norge</a>. Ved å klikke på et punkt i grafen, kan du bla i de aktuelle avisutgavene.
	</div>
</div>
</div>

<script>
    var data =  {'data': {
                'onclick': function (d, element) {
                    dateStr = d["x"];
                    year = dateStr.getFullYear();
                    date = year + '0101'; dateTo = year + '1231'; term = d["name"];
                    term = term.replace('/', ' OR ')
                    url = "https://www.nb.no/search?q=" + encodeURIComponent(term) + "&mediatype=aviser&fromDate=" + date + "&toDate=" + dateTo
                    window.open(url);
                },
                'x': 'x',
        'columns': [
            [
                'x',
                '1828-01-01',
                '1829-01-01',
                '1830-01-01',
                '1831-01-01',
                '1832-01-01',
                '1833-01-01',
                '1834-01-01',
                '1835-01-01',
                '1836-01-01',
                '1837-01-01',
                '1838-01-01',
                '1839-01-01',
                '1840-01-01',
                '1841-01-01',
                '1842-01-01',
                '1843-01-01',
                '1844-01-01',
                '1845-01-01',
                '1846-01-01',
                '1847-01-01',
                '1848-01-01',
                '1849-01-01',
                '1850-01-01',
                '1851-01-01',
                '1852-01-01',
                '1853-01-01',
                '1854-01-01',
                '1855-01-01',
                '1856-01-01',
                '1857-01-01',
                '1858-01-01',
                '1859-01-01',
                '1860-01-01',
                '1861-01-01',
                '1862-01-01',
                '1863-01-01',
                '1864-01-01',
                '1865-01-01',
                '1866-01-01',
                '1867-01-01',
                '1868-01-01',
                '1869-01-01',
                '1870-01-01'
            ],
            [
                'kolera*/cholera*/colera*',
                0.0037010341508967293,
                0.01212919184939009,
                0.11655888334233805,
                0.2754676971101081,
                0.3637846212105793,
                0.35124686064702243,
                0.21273174653680993,
                0.14286869363537022,
                0.08767410280975137,
                0.07823626446614179,
                0.05530397059646797,
                0.02244514193097184,
                0.01485026435585419,
                0.013977196105290477,
                0.010890640728365547,
                0.01009387599260806,
                0.016341600546620646,
                0.03368851217179175,
                0.05958764004850751,
                0.14668099217494332,
                0.2947085168777342,
                0.37196917408328484,
                0.305386102946066,
                0.17067089330227428,
                0.2099392305893578,
                0.2742758646422179,
                0.3252940099350081,
                0.22261861691224452,
                0.1753235981243074,
                0.12144914819366166,
                0.09846849575569534,
                0.05983644176654287,
                0.03437197710773781,
                0.019122477344963702,
                0.013964220126023144,
                0.011892867241033273,
                0.050354405702571735,
                0.1309523685119348,
                0.17137910411343352,
                0.14325982356448544,
                0.07334067587140065,
                0.045217760840767236,
                0.04532024739925828
            ]
        ]
            },
           'axis': {
                'x': {
                    'type': 'timeseries',
                    'tick': {
                        'format':'%Y'
                    }
                }
            },
            'grid': {
                'x': {
                    'lines': [
                        {'value': '1832-01-01', 'text': 'Kolera-epidemi i Christiania'},
                        {'value': '1848-01-01', 'text': 'Kolera-epidemi i Bergen'},
                        {'value': '1853-01-01', 'text': 'Ny kolera-epidemi i Christiania'}
                    ]
                }
            }
        }
    data['bindto']='#trends';
    c3.generate(data);
</script></div>
